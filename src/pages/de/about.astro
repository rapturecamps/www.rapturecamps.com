---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Hero from "@/components/sections/Hero.astro";
import Breadcrumbs from "@/components/Breadcrumbs.astro";
import StatsSection from "@/components/sections/StatsSection.astro";
import CTASection from "@/components/sections/CTASection.astro";
import { PortableText } from "astro-portabletext";
import { getPageBySlug } from "@/lib/sanity-data";

const page = await getPageBySlug("about", "de");
const title = page?.title || "Unsere Geschichte";
const seoTitle = page?.seo?.title || "Über uns | Rapture Surfcamps";
const seoDesc = page?.seo?.description || "Gegründet 2003, ist Rapture Surfcamps zu einem globalen Netzwerk von 8 Surfcamps in 5 Ländern gewachsen.";
---

<BaseLayout title={seoTitle} description={seoDesc}>
  <Hero
    title={title}
    backgroundImage="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1920&h=1080&fit=crop"
  >
    <Breadcrumbs inline crumbs={[{ label: title }]} />
  </Hero>

  <section class="py-20 bg-dark">
    <div class="max-w-3xl px-6 sm:px-12 lg:px-20">
      {page?.body ? (
        <div class="space-y-6 text-base sm:text-lg text-white/50 leading-relaxed prose-page">
          <PortableText value={page.body} />
        </div>
      ) : (
        <div class="space-y-6 text-base sm:text-lg text-white/50 leading-relaxed">
          <p>Inhalte werden bald verfügbar sein. Erstelle eine deutsche Übersetzung dieser Seite in Sanity Studio.</p>
        </div>
      )}
    </div>
  </section>

  <StatsSection />
  <CTASection />
</BaseLayout>

<style is:global>
  .prose-page h2 { font-size: 1.125rem; font-weight: 600; color: white; margin-bottom: 0.75rem; margin-top: 2rem; }
  .prose-page h3 { font-size: 1rem; font-weight: 600; color: white; margin-bottom: 0.5rem; margin-top: 1.5rem; }
  .prose-page p { margin-bottom: 1rem; }
  .prose-page ul { list-style-type: disc; padding-left: 1.25rem; margin-bottom: 1rem; }
  .prose-page ol { list-style-type: decimal; padding-left: 1.25rem; margin-bottom: 1rem; }
  .prose-page li { margin-bottom: 0.25rem; }
  .prose-page a { color: var(--color-ocean-light, #38bdf8); }
  .prose-page a:hover { text-decoration: underline; }
  .prose-page strong { color: rgba(255,255,255,0.7); }
</style>
