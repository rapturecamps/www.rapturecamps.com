---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Breadcrumbs from "@/components/Breadcrumbs.astro";
import { PortableText } from "astro-portabletext";
import { getPageBySlug } from "@/lib/sanity-data";

const page = await getPageBySlug("terms", "de");
const title = page?.title || "AGB";
---

<BaseLayout title={`${title} | Rapture Surfcamps`} description={page?.seo?.description || "AGB für Rapture Surfcamps."} disablePopups>
  <div class="pt-32 pb-20 bg-dark">
    <div class="px-6 sm:px-12 lg:px-20 max-w-3xl">
      <h1 class="font-display text-4xl sm:text-5xl font-bold text-white">{title}</h1>
      <Breadcrumbs inline crumbs={[{ label: title }]} />
      {page?.lastUpdated && (
        <p class="text-sm text-white/30 mt-6 mb-10">Zuletzt aktualisiert: {new Date(page.lastUpdated).toLocaleDateString("de-DE", { month: "long", year: "numeric" })}</p>
      )}
      {page?.body ? (
        <div class="prose-legal space-y-4 text-sm text-white/50 leading-relaxed mt-10">
          <PortableText value={page.body} />
        </div>
      ) : (
        <p class="text-sm text-white/50 mt-10">Erstelle eine deutsche Übersetzung dieser Seite in Sanity Studio.</p>
      )}
    </div>
  </div>
</BaseLayout>

<style is:global>
  .prose-legal h2 { font-size: 1.125rem; font-weight: 600; color: white; margin-bottom: 0.75rem; margin-top: 2rem; }
  .prose-legal h3 { font-size: 1rem; font-weight: 600; color: white; margin-bottom: 0.5rem; margin-top: 1.5rem; }
  .prose-legal p { margin-bottom: 1rem; }
  .prose-legal ul { list-style-type: disc; padding-left: 1.25rem; margin-bottom: 1rem; }
  .prose-legal ol { list-style-type: decimal; padding-left: 1.25rem; margin-bottom: 1rem; }
  .prose-legal li { margin-bottom: 0.25rem; }
  .prose-legal a { color: var(--color-ocean-light, #38bdf8); }
  .prose-legal a:hover { text-decoration: underline; }
  .prose-legal strong { color: rgba(255,255,255,0.7); }
</style>
