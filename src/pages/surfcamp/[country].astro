---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Hero from "@/components/sections/Hero.astro";
import CTASection from "@/components/sections/CTASection.astro";
import { destinations, countries } from "@/lib/data";

const countryData: Record<string, { title: string; tagline: string; description: string }> = {
  bali: {
    title: "Surf Camps\nin Bali",
    tagline: "Experience some of the world's best waves on the stunning Bukit Peninsula",
    description: "The tropical paradise of Bali is famous for being one of the most popular surfing destinations worldwide. The waves here are excellent all year round with consistent swells and an incredible selection of breaks for surfers ranging from the beginner to experts.",
  },
  "costa-rica": {
    title: "Surf Camp\nin Costa Rica",
    tagline: "Pura Vida vibes and world-class waves in tropical paradise",
    description: "Costa Rica offers some of the most consistent surf conditions in Central America. Our camp in Avellanas puts you right in the heart of Guanacaste's legendary coastline.",
  },
  portugal: {
    title: "Surf Camps\nin Portugal",
    tagline: "Europe's premier surf destination with year-round waves",
    description: "Portugal's Atlantic coast delivers powerful, consistent surf that attracts riders from around the world. From the World Surfing Reserve of Ericeira to the wild Alentejo coast.",
  },
  morocco: {
    title: "Surf Camp\nin Morocco",
    tagline: "Where African desert meets Atlantic swell",
    description: "Morocco's southern coast offers incredible right-hand point breaks, warm hospitality, and an unforgettable cultural experience. This is where Rapture started.",
  },
  nicaragua: {
    title: "Surf Camps\nin Nicaragua",
    tagline: "Central America's hidden gem for surfers",
    description: "Nicaragua's Pacific coast delivers powerful beach breaks and a laid-back atmosphere that's hard to beat.",
  },
};

export function getStaticPaths() {
  return countries.map((c) => ({ params: { country: c.slug } }));
}

const { country } = Astro.params;
const data = countryData[country!];
if (!data) return Astro.redirect("/404");

const countryCamps = destinations.filter(
  (d) => d.country.toLowerCase().replace(" ", "-") === country
);
---

<BaseLayout
  title={`${data.title.replace("\n", " ")} | Rapture Surfcamps`}
  description={data.description}
>
  <Hero
    title={data.title}
    subtitle={data.tagline}
    backgroundImage="https://images.unsplash.com/photo-1502680390548-bdbac40a5e46?w=1920&h=1080&fit=crop"
  />

  <section class="py-20 bg-dark">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <p class="text-base text-white/40 max-w-2xl mb-12 leading-relaxed">{data.description}</p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {countryCamps.map((camp) => (
          <a href={camp.slug} class="group overflow-hidden rounded-xl bg-dark-lighter border border-white/5 transition-all hover:border-white/15">
            <div class="relative aspect-[16/10] overflow-hidden">
              <img src={camp.image} alt={`${camp.name} surf camp`} class="absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-105" loading="lazy" />
            </div>
            <div class="p-6">
              <p class="text-[11px] uppercase tracking-wider text-white/30 mb-1">{camp.location}</p>
              <h3 class="text-xl font-semibold text-white group-hover:text-ocean-light transition-colors">{camp.name}</h3>
              <div class="mt-3 flex items-center gap-2 text-ocean-light text-xs font-medium opacity-0 translate-y-1 transition-all duration-300 group-hover:opacity-100 group-hover:translate-y-0">
                <span>View this camp</span>
                <svg class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14" /><path d="m12 5 7 7-7 7" /></svg>
              </div>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <CTASection />
</BaseLayout>
