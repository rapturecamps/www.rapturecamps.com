---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Hero from "@/components/sections/Hero.astro";
import Breadcrumbs from "@/components/Breadcrumbs.astro";
import CTASection from "@/components/sections/CTASection.astro";
import ImageGrid from "@/components/sections/ImageGrid.astro";
import ImageBreak from "@/components/sections/ImageBreak.astro";
import ContentBlock from "@/components/sections/ContentBlock.astro";
import BlockRenderer from "@/components/blocks/BlockRenderer.astro";
import ElfsightReviews from "@/components/sections/ElfsightReviews.astro";
import { destinations, countries } from "@/lib/data";
import { getCountries, getCountryBySlug, getCampsByCountry } from "@/lib/sanity-data";

const countryContent: Record<string, {
  title: string;
  tagline: string;
  description: string;
  heroImage: string;
  heroImages?: string[];
  intro: string;
  campsSectionTitle: string;
  imageGrid: { src: string; alt: string }[];
  contentBlocks: { heading: string; body: string; image?: string; imageAlt?: string; reverse?: boolean; background?: "dark" | "dark-lighter" }[];
  imageBreak: { src: string; alt: string; caption?: string };
  comparison: { heading: string; subtitle: string; features: string[]; camps: { slug: string; values: string[] }[] };
  surfSpots?: { heading: string; subtitle: string; spots: { name: string; level: string; type: string; description: string }[] };
  faqs?: { question: string; answer: string }[];
}> = {
  bali: {
    title: "Surf Camps\nin Bali",
    tagline: "Experience some of the world's best waves on the stunning Bukit Peninsula",
    description: "The tropical paradise of Bali is famous for being one of the most popular surfing destinations worldwide. With waves for every level, warm water year-round, and an incredible culture — it's the ultimate surf trip.",
    heroImage: "https://images.unsplash.com/photo-1537953773345-d172ccf13cf1?w=1920&h=1080&fit=crop",
    heroImages: [
      "https://images.unsplash.com/photo-1537953773345-d172ccf13cf1?w=1920&h=1080&fit=crop",
      "https://images.unsplash.com/photo-1518548419970-58e3b4079ab2?w=1920&h=1080&fit=crop",
      "https://images.unsplash.com/photo-1504681869696-d977211a5f4c?w=1920&h=1080&fit=crop",
      "https://images.unsplash.com/photo-1559628233-100c798642d4?w=1920&h=1080&fit=crop",
    ],
    intro: "From the legendary barrels of Padang Padang to the beginner-friendly breaks of Green Bowl, Bali's Bukit Peninsula has it all. We run two camps here — each with its own character, but both sharing that unmistakable Rapture spirit.",
    campsSectionTitle: "Stay at Our Surf Camps in Bali",
    imageGrid: [
      { src: "https://images.unsplash.com/photo-1559628233-100c798642d4?w=1200&h=500&fit=crop", alt: "Tropical pool area at Rapture surf camp Bali" },
      { src: "https://images.unsplash.com/photo-1540979388789-6cee28a1cdc9?w=600&h=450&fit=crop", alt: "Relaxation lounge overlooking the pool" },
      { src: "https://images.unsplash.com/photo-1582610116397-edb318620f90?w=600&h=225&fit=crop", alt: "Balinese outdoor bathroom" },
      { src: "https://images.unsplash.com/photo-1537996194471-e657df975ab4?w=600&h=225&fit=crop", alt: "Aerial view of Bali surf camp" },
    ],
    contentBlocks: [
      {
        heading: "When Is the Best Time to Surf in Bali?",
        body: "<p>Bali delivers rideable waves 365 days a year, but the peak season runs from June through September. During the dry season, consistent Indian Ocean swells hit the west-facing reefs of the Bukit Peninsula, creating the powerful barrels Bali is famous for.</p><p>The wet season (November–March) brings smaller, more playful waves on the east coast — perfect for progressing your skills without the crowds. Water temperature stays between 26–30°C year-round, so you'll rarely need more than a rash vest.</p>",
        image: "https://images.unsplash.com/photo-1518548419970-58e3b4079ab2?w=800&h=600&fit=crop",
        imageAlt: "Surfer riding a wave in Bali",
      },
      {
        heading: "World-Class Waves for Every Level",
        body: "<p>Bali is home to over 60 surf spots. Beginners find their feet at Padang Padang Right, where long unbroken walls roll in at high tide. Intermediate surfers challenge themselves at Dreamland and Balangan, while experts chase the hollow lefts of Uluwatu and the famous Padang Padang barrel.</p><p>Our surf instructors know every break on the Bukit and will guide you to the right spot for your level — whether it's your first pop-up or your hundredth tube ride.</p>",
        image: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=800&h=600&fit=crop",
        imageAlt: "Aerial view of surf break in Bali",
        reverse: true,
        background: "dark-lighter",
      },
      {
        heading: "More Than Just Surfing",
        body: "<p>Between sessions, Bali offers an endless menu: explore ancient Hindu temples perched on sea cliffs, hike through emerald rice terraces in Ubud, or simply unwind with a Balinese massage and a fresh coconut by the pool.</p><p>Our camps include daily yoga classes, delicious local cuisine prepared by our chefs, and a community of like-minded travellers from around the world. Whether you're here for a week or a month, Bali has a way of feeling like home.</p>",
        image: "https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=800&h=600&fit=crop",
        imageAlt: "Bali temple at sunset",
      },
    ],
    imageBreak: {
      src: "https://images.unsplash.com/photo-1504681869696-d977211a5f4c?w=1920&h=800&fit=crop",
      alt: "Surfer walking with board on Bali beach at sunset",
      caption: "Padang Padang Beach, Bukit Peninsula",
    },
    comparison: {
      heading: "Which Bali Camp Is Right for You?",
      subtitle: "Both camps are on the Bukit Peninsula, 15 minutes apart. Here's how they compare.",
      features: ["Vibe", "Best For", "Surf Breaks Nearby", "Pool", "Rooms", "Group Size", "Yoga", "Nightlife Access"],
      camps: [
        { slug: "/surfcamp/bali/green-bowl", values: ["Social & lively", "All levels", "Green Bowl, Dreamland, Balangan", "Yes — large pool area", "4 room types", "Up to 35 guests", "Daily", "15 min to Uluwatu bars"] },
        { slug: "/surfcamp/bali/padang-padang", values: ["Boutique & intimate", "Intermediate+", "Padang Padang, Uluwatu, Impossibles", "Yes — private villa pool", "3 room types", "Up to 16 guests", "Daily", "5 min walk to Padang Padang"] },
      ],
    },
    faqs: [
      { question: "Is Bali good for beginner surfers?", answer: "Absolutely. Bali has dozens of beginner-friendly breaks with sandy bottoms and mellow whitewater. Our Green Bowl camp specialises in taking first-timers from zero to riding green waves within a week. The warm water (26–30°C) and year-round consistency make it one of the best places in the world to learn." },
      { question: "What is the best time to surf in Bali?", answer: "The peak surf season is June through September when consistent Indian Ocean swells hit the Bukit Peninsula. But Bali has rideable waves 365 days a year — the wet season (November–March) brings smaller, playful waves ideal for progressing. Water is warm year-round." },
      { question: "How much does a surf camp in Bali cost?", answer: "Our Bali camps start from around €500 per week, including accommodation, daily surf lessons or guiding, breakfast and dinner, yoga, video analysis, and airport transfers. It's all-inclusive — no hidden extras." },
      { question: "Do I need a visa to surf in Bali?", answer: "Most nationalities can get a Visa on Arrival (VOA) at the airport for 30 days, which can be extended once for another 30 days. Check with the Indonesian embassy for your specific nationality." },
      { question: "What should I bring to a surf camp in Bali?", answer: "We provide all surf equipment (boards, rash vests, reef booties). Bring sunscreen (reef-safe preferred), a hat, light clothing, and mosquito repellent. A thin rash vest or lycra is useful for sun protection." },
      { question: "Can I work remotely from your Bali surf camp?", answer: "Yes — both camps have fast WiFi and plenty of quiet spots to work between surf sessions. Many of our guests are digital nomads combining work and surf. Bali's timezone (GMT+8) works well for European morning meetings." },
    ],
    surfSpots: {
      heading: "Surf Spots Near Our Bali Camps",
      subtitle: "The Bukit Peninsula is home to some of the most famous surf breaks in the world. Here are the key spots we take our guests to.",
      spots: [
        { name: "Padang Padang", level: "Advanced", type: "Reef break, left", description: "Bali's most famous barrel. A fast, hollow left that breaks over a sharp reef shelf. Works best on bigger SW swells (6ft+) from June to September. The Rip Curl Cup is held here when conditions align." },
        { name: "Uluwatu", level: "Intermediate–Advanced", type: "Reef break, left", description: "A world-class left-hander with multiple takeoff zones (The Peak, Racetracks, Outside Corner). Long, walling rides on solid swells — one of Indonesia's most iconic waves." },
        { name: "Dreamland", level: "All levels", type: "Beach break", description: "A wide beach break with punchy peaks. The inside section is forgiving for beginners at high tide, while the outside delivers fun barrels on bigger days." },
        { name: "Balangan", level: "Intermediate", type: "Reef break, left", description: "A mellow left-hander over a flat reef shelf. Consistent and fun on mid-sized swells — a great confidence-builder for intermediates stepping up to reef breaks." },
        { name: "Green Bowl", level: "Intermediate–Advanced", type: "Reef break, left & right", description: "A secluded spot reached by 300 steps down a cliff. Offers both lefts and rights depending on swell direction. Uncrowded due to the hike — worth every step." },
        { name: "Bingin", level: "Intermediate–Advanced", type: "Reef break, left", description: "A short, intense left tube over shallow reef. Best at mid to low tide with a south swell. Technical and rewarding for competent surfers." },
      ],
    },
  },
  "costa-rica": {
    title: "Surf Camp\nin Costa Rica",
    tagline: "Pura Vida vibes and world-class waves in tropical paradise",
    description: "Costa Rica offers some of the most consistent surf conditions in Central America. Our camp in Avellanas puts you in the heart of Guanacaste's legendary coastline — warm water, offshore winds, and that unmistakable Pura Vida spirit.",
    heroImage: "https://images.unsplash.com/photo-1505459668311-8dfac7952bf0?w=1920&h=1080&fit=crop",
    heroImages: [
      "https://images.unsplash.com/photo-1505459668311-8dfac7952bf0?w=1920&h=1080&fit=crop",
      "https://images.unsplash.com/photo-1499002238440-d264edd596ec?w=1920&h=1080&fit=crop",
      "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1920&h=1080&fit=crop",
      "https://images.unsplash.com/photo-1468413253725-0d5181091126?w=1920&h=1080&fit=crop",
    ],
    intro: "Playa Avellanas is one of Costa Rica's best-kept secrets: perfect waves, zero crowds, and a jungle backdrop that feels like a movie set. Our freshly renovated camp sits right in the middle of it all.",
    campsSectionTitle: "Stay at Our Surf Camp in Costa Rica",
    imageGrid: [
      { src: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1200&h=500&fit=crop", alt: "Costa Rica tropical beach" },
      { src: "https://images.unsplash.com/photo-1499002238440-d264edd596ec?w=600&h=450&fit=crop", alt: "Surf camp pool area Costa Rica" },
      { src: "https://images.unsplash.com/photo-1596178065887-1198b6148b2b?w=600&h=225&fit=crop", alt: "Jungle surroundings at Avellanas" },
      { src: "https://images.unsplash.com/photo-1468413253725-0d5181091126?w=600&h=225&fit=crop", alt: "Costa Rica wildlife sloth" },
    ],
    contentBlocks: [
      {
        heading: "When Is the Best Time to Surf in Costa Rica?",
        body: "<p>Costa Rica's Pacific coast fires year-round, but the prime season is May through November when consistent south swells deliver overhead waves to Guanacaste's beaches. The dry season (December–April) brings smaller, cleaner conditions perfect for learning.</p><p>Water temperatures hover around 27–29°C, and you'll surf in boardshorts every session. Offshore winds are common in the mornings, grooming the waves to perfection before the afternoon sea breeze kicks in.</p>",
        image: "https://images.unsplash.com/photo-1505459668311-8dfac7952bf0?w=800&h=600&fit=crop",
        imageAlt: "Surfing at Playa Avellanas",
      },
      {
        heading: "Pura Vida at Playa Avellanas",
        body: "<p>Our camp is surrounded by jungle — wake up to howler monkeys, spot sloths in the trees, and watch iguanas sun themselves by the pool. The freshly renovated property features an outdoor cinema, recovery centre, and blazing-fast internet for digital nomads.</p><p>Playa Tamarindo is just 20 minutes away for nightlife, restaurants, and shopping. But most guests find everything they need right here: great waves, incredible food, yoga at sunset, and new friends from around the world.</p>",
        image: "https://images.unsplash.com/photo-1499002238440-d264edd596ec?w=800&h=600&fit=crop",
        imageAlt: "Pool area at Costa Rica surf camp",
        reverse: true,
        background: "dark-lighter",
      },
    ],
    imageBreak: {
      src: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1920&h=800&fit=crop",
      alt: "Tropical beach in Costa Rica at golden hour",
      caption: "Playa Avellanas, Guanacaste",
    },
    comparison: {
      heading: "Stay at Our Surf Camp in Costa Rica",
      subtitle: "Playa Avellanas is one of Costa Rica's best-kept secrets: perfect waves, zero crowds, and a jungle backdrop that feels like a movie set.",
      features: ["Vibe", "Best For", "Surf Breaks Nearby", "Pool", "Rooms", "Group Size", "Meals", "Unique Feature"],
      camps: [
        { slug: "/surfcamp/costa-rica/avellanas", values: ["Pura Vida & adventurous", "All levels", "Avellanas, Little Hawaii, Playa Negra", "Yes — pool & jacuzzi", "5 room types", "Up to 30 guests", "Breakfast & dinner included", "Jungle setting, outdoor cinema, recovery centre"] },
      ],
    },
    faqs: [
      { question: "Is Costa Rica good for beginner surfers?", answer: "Excellent. Playa Avellanas has several zones suited to beginners — wide sandy beaches with consistent whitewater for learning. The water is warm (27–29°C) year-round, so you can focus on surfing without worrying about cold water." },
      { question: "What is the best time to surf in Costa Rica?", answer: "The dry season (December–April) brings smaller, clean conditions perfect for learning. May through November sees bigger, more consistent south swells for intermediate and advanced surfers. Offshore mornings are common in both seasons." },
      { question: "How safe is Costa Rica for solo travellers?", answer: "Costa Rica is one of the safest countries in Central America and a well-trodden surf travel route. Our camp has 24/7 security and the Avellanas community is very welcoming. Solo travellers make up about 60% of our guests." },
      { question: "How do I get from San José airport to the camp?", answer: "The camp is about 4.5 hours from San José (SJO) airport. We offer shared shuttle transfers on Saturday arrival/departure days, or you can rent a 4x4 for the drive — the roads are paved but the last stretch is unpaved." },
      { question: "Is the WiFi good enough for remote work?", answer: "Yes — we invested in a dedicated fibre line specifically for digital nomads. There are quiet workspaces, power outlets, and strong coverage across the property. Many guests do month-long workation stays." },
    ],
    surfSpots: {
      heading: "Surf Spots in Guanacaste, Costa Rica",
      subtitle: "Guanacaste's coast is packed with world-class breaks. Here are the spots we surf most.",
      spots: [
        { name: "Playa Avellanas", level: "All levels", type: "Beach break", description: "Our home break — a long stretch of sandy beach with multiple peaks. Beginners take the inside whitewater, while experienced surfers find hollow sections on the outer sandbars. Consistent and offshore most mornings." },
        { name: "Little Hawaii", level: "Intermediate–Advanced", type: "Beach/rock break", description: "The southern end of Avellanas where a rock shelf creates a powerful, hollow right-hander. Named by locals for its Hawaiian-like intensity. Best on a rising tide with south swell." },
        { name: "Playa Negra", level: "Intermediate–Advanced", type: "Reef break, right", description: "One of Costa Rica's best right-hand reef breaks. A fast, hollow wave over a rock shelf — technical but incredibly fun. 10 minutes south of camp." },
        { name: "Playa Grande", level: "Beginner–Intermediate", type: "Beach break", description: "A wide, sandy beach break inside Las Baulas National Park. Long, mellow waves ideal for longboarding and building confidence. Also a major leatherback turtle nesting site." },
        { name: "Tamarindo", level: "Beginner", type: "Beach break", description: "One of Costa Rica's most famous beginner spots. Wide, gentle waves on a sandy bottom. 20 minutes north of camp — also great for an evening out." },
      ],
    },
  },
  portugal: {
    title: "Surf Camps\nin Portugal",
    tagline: "Europe's premier surf destination with year-round waves",
    description: "Portugal's Atlantic coast delivers powerful, consistent surf that attracts riders from around the world. From the World Surfing Reserve of Ericeira to the wild Alentejo coast — we have three camps to choose from.",
    heroImage: "https://images.unsplash.com/photo-1509914398892-963f53e6e2f1?w=1920&h=1080&fit=crop",
    heroImages: [
      "https://images.unsplash.com/photo-1509914398892-963f53e6e2f1?w=1920&h=1080&fit=crop",
      "https://images.unsplash.com/photo-1476673160081-cf065607f449?w=1920&h=1080&fit=crop",
      "https://images.unsplash.com/photo-1555881400-74d7acaacd8b?w=1920&h=1080&fit=crop",
      "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1920&h=1080&fit=crop",
    ],
    intro: "Portugal is Europe's surfing capital and for good reason. World-class waves, charming coastal villages, incredible food, and affordable prices make it the perfect destination whether you're learning to surf or chasing your best barrel.",
    campsSectionTitle: "Stay at Our Surf Camps in Portugal",
    imageGrid: [
      { src: "https://images.unsplash.com/photo-1476673160081-cf065607f449?w=1200&h=500&fit=crop", alt: "Portuguese coastline with dramatic cliffs" },
      { src: "https://images.unsplash.com/photo-1509914398892-963f53e6e2f1?w=600&h=450&fit=crop", alt: "Surfer at Ericeira beach" },
      { src: "https://images.unsplash.com/photo-1555881400-74d7acaacd8b?w=600&h=225&fit=crop", alt: "Ericeira old town" },
      { src: "https://images.unsplash.com/photo-1504681869696-d977211a5f4c?w=600&h=225&fit=crop", alt: "Sunset surfing in Portugal" },
    ],
    contentBlocks: [
      {
        heading: "When Is the Best Time to Surf in Portugal?",
        body: "<p>Portugal's surf season never really stops. Summer (June–September) brings smaller, consistent swells ideal for beginners and intermediates — plus warm weather and long days. Autumn and winter (October–March) is when the Atlantic unleashes powerful swells that light up world-class breaks like Coxos and Supertubos.</p><p>Water temperatures range from 15°C in winter to 20°C in summer — wetsuits are standard, but the waves are absolutely worth it.</p>",
        image: "https://images.unsplash.com/photo-1476673160081-cf065607f449?w=800&h=600&fit=crop",
        imageAlt: "Portugal coastline surf break",
      },
      {
        heading: "Ericeira: Europe's World Surfing Reserve",
        body: "<p>Ericeira is one of only two World Surfing Reserves in Europe, and our main camp sits oceanfront overlooking Foz do Lizandro beach. Walk to 7 different surf breaks, explore the charming old town with its cobblestone streets and seafood restaurants, and enjoy the best of Portuguese village life.</p><p>For a more premium experience, our Coxos Surf Villa offers an infinity pool facing the ocean, just steps from one of Europe's most famous waves. A shuttle connects both properties throughout the day.</p>",
        image: "https://images.unsplash.com/photo-1555881400-74d7acaacd8b?w=800&h=600&fit=crop",
        imageAlt: "Ericeira old town Portugal",
        reverse: true,
        background: "dark-lighter",
      },
      {
        heading: "The Wild Alentejo Coast",
        body: "<p>Our Milfontes Eco Surfcamp offers something completely different: a small farm setting in the heart of the Southwest Alentejo Natural Park. This is for surfers who want to disconnect — permaculture gardens, Portuguese cooking workshops, and empty lineups on uncrowded beaches.</p><p>Hike the Rota Vicentina trail, explore hidden coves, and experience a side of Portugal most tourists never see.</p>",
        image: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=800&h=600&fit=crop",
        imageAlt: "Alentejo coast Portugal",
      },
    ],
    imageBreak: {
      src: "https://images.unsplash.com/photo-1509914398892-963f53e6e2f1?w=1920&h=800&fit=crop",
      alt: "Surfer riding a wave at Ericeira Portugal",
      caption: "Ericeira, World Surfing Reserve",
    },
    comparison: {
      heading: "Which Portugal Camp Is Right for You?",
      subtitle: "Three distinct experiences across the Portuguese coast. Here's how they compare.",
      features: ["Location", "Vibe", "Best For", "Surf Breaks Nearby", "Pool", "Rooms", "Unique Feature"],
      camps: [
        { slug: "/surfcamp/portugal/ericeira", values: ["Ericeira", "Beachfront social hub", "All levels", "Foz do Lizandro, Coxos, Ribeira d'Ilhas", "No — ocean is your pool", "6 room types", "Oceanfront location, walk to town"] },
        { slug: "/surfcamp/portugal/coxos", values: ["Ericeira (Coxos)", "Premium & exclusive", "Intermediate+", "Coxos, Crazy Left, Cave", "Yes — infinity pool ocean view", "4 premium suites", "Infinity pool facing Europe's best wave"] },
        { slug: "/surfcamp/portugal/milfontes", values: ["Milfontes, Alentejo", "Eco retreat & nature", "All levels", "Milfontes, Almograve, Zambujeira", "No — outdoor shower!", "Eco rooms & tents", "Permaculture farm, empty lineups"] },
      ],
    },
    faqs: [
      { question: "Is Portugal good for beginner surfers?", answer: "Absolutely. Portugal has a huge variety of beach breaks with sandy bottoms that are perfect for learning. Our Ericeira camp and Milfontes Eco camp both run structured beginner programs. The consistency of Atlantic swells means you'll get waves every day." },
      { question: "What is the best time to surf in Portugal?", answer: "Summer (June–September) is ideal for beginners and intermediates — smaller, consistent swells plus warm weather. Autumn/winter (October–March) brings powerful Atlantic swells for experienced surfers. The water is cooler (15–20°C) so wetsuits are required year-round." },
      { question: "Do I need a wetsuit to surf in Portugal?", answer: "Yes, always. In summer a 3/2mm fullsuit is standard, and in winter you'll want a 4/3mm with boots. We provide wetsuits free of charge at all our Portugal camps." },
      { question: "What's the difference between Ericeira and Milfontes?", answer: "Ericeira is a vibrant surf town with restaurants, nightlife, and easy access from Lisbon (45 min). Milfontes is a rural eco-retreat in a natural park — think farm-to-table meals, empty beaches, and total disconnection. Both have excellent waves." },
      { question: "How do I get to your Portugal surf camps?", answer: "Fly into Lisbon (LIS) airport. Ericeira is 45 minutes north by car/shuttle. Milfontes is about 2.5 hours south. We arrange shared transfers on check-in/check-out days, or you can rent a car." },
      { question: "Can I visit multiple camps in one trip?", answer: "Yes — it's a popular option. Many guests spend a week in Ericeira and a week in Milfontes for the contrast. We can arrange shuttle transfers between camps and offer multi-camp discounts." },
    ],
    surfSpots: {
      heading: "Surf Spots on Portugal's Atlantic Coast",
      subtitle: "Portugal has some of Europe's best waves. Here are the breaks near our three camps.",
      spots: [
        { name: "Coxos", level: "Advanced", type: "Reef/point break, right", description: "Portugal's most famous wave and one of Europe's best right-hand point breaks. A powerful, hollow barrel that breaks over a rocky shelf. Located in Ericeira's World Surfing Reserve — serious wave for serious surfers." },
        { name: "Ribeira d'Ilhas", level: "All levels", type: "Reef break, right", description: "A long, user-friendly right-hander and WSL event site. Multiple sections allow beginners to ride the inside while advanced surfers work the outer peak. One of Ericeira's most consistent spots." },
        { name: "Foz do Lizandro", level: "Beginner–Intermediate", type: "Beach break", description: "Our Ericeira camp's home break — a wide river-mouth beach break with sandy bottom. Mellow waves ideal for learning. Walk to the lineup in 2 minutes from the camp." },
        { name: "São Lourenço", level: "Intermediate–Advanced", type: "Beach break", description: "A powerful beach break 5 minutes south of Ericeira. Heavy shorebreak and barrel sections make it exciting on solid swells. Best for confident surfers." },
        { name: "Praia do Malhão", level: "All levels", type: "Beach break", description: "A wild, empty beach break in the Alentejo near our Milfontes camp. Multiple peaks along a long stretch of sand, often uncrowded even in summer. Perfect for surfers who want space." },
        { name: "Zambujeira do Mar", level: "Intermediate", type: "Beach break", description: "A picturesque cove near Milfontes with a consistent left and right peak. Works well on NW and W swells. Also home to the Sudoeste music festival in summer." },
      ],
    },
  },
  morocco: {
    title: "Surf Camp\nin Morocco",
    tagline: "Where African desert meets Atlantic swell",
    description: "Morocco's southern coast offers incredible right-hand point breaks, warm hospitality, and an unforgettable cultural experience. This is where Rapture started over 20 years ago.",
    heroImage: "https://images.unsplash.com/photo-1530053969600-caed2596d242?w=1920&h=1080&fit=crop",
    heroImages: [
      "https://images.unsplash.com/photo-1530053969600-caed2596d242?w=1920&h=1080&fit=crop",
      "https://images.unsplash.com/photo-1489749798305-4fea3ae63d43?w=1920&h=1080&fit=crop",
      "https://images.unsplash.com/photo-1517821099606-cef63a9bcda6?w=1920&h=1080&fit=crop",
      "https://images.unsplash.com/photo-1539635278303-d4002c07eae3?w=1920&h=1080&fit=crop",
    ],
    intro: "Sidi Ifni is where it all began. More than 20 years ago, our founders fell in love with Morocco's waves and culture — and started the very first Rapture camp right here. That same spirit lives on in our Banana Village surf house.",
    campsSectionTitle: "Stay at Our Surf Camp in Morocco",
    imageGrid: [
      { src: "https://images.unsplash.com/photo-1489749798305-4fea3ae63d43?w=1200&h=500&fit=crop", alt: "Morocco coastline with surf" },
      { src: "https://images.unsplash.com/photo-1530053969600-caed2596d242?w=600&h=450&fit=crop", alt: "Moroccan surf break" },
      { src: "https://images.unsplash.com/photo-1539635278303-d4002c07eae3?w=600&h=225&fit=crop", alt: "Moroccan architecture" },
      { src: "https://images.unsplash.com/photo-1517821099606-cef63a9bcda6?w=600&h=225&fit=crop", alt: "Moroccan food and tea" },
    ],
    contentBlocks: [
      {
        heading: "When Is the Best Time to Surf in Morocco?",
        body: "<p>Morocco is a true winter surf destination. From October through April, powerful Atlantic swells wrap around the coast, delivering world-class right-hand point breaks. The dry season means offshore winds and clear skies — perfect conditions session after session.</p><p>Summer brings smaller waves that are ideal for beginners, plus warmer water temperatures. Year-round air temperatures stay between 18–28°C, making Morocco comfortable any time of year.</p>",
        image: "https://images.unsplash.com/photo-1530053969600-caed2596d242?w=800&h=600&fit=crop",
        imageAlt: "Surf break in Morocco",
      },
      {
        heading: "Culture, Tradition, and Incredible Hospitality",
        body: "<p>Morocco offers something no other surf destination can: a deep immersion into North African culture. Explore Berber villages, wander through ancient medinas, ride camels along the beach, and drink sweet mint tea on the rooftop as the sun sets over the Atlantic.</p><p>Our Banana Village surf house is intimate — just 21 guests maximum — with three meals a day, a rooftop terrace with panoramic ocean views, and some of the warmest hospitality you'll find anywhere.</p>",
        image: "https://images.unsplash.com/photo-1539635278303-d4002c07eae3?w=800&h=600&fit=crop",
        imageAlt: "Moroccan cultural experience",
        reverse: true,
        background: "dark-lighter",
      },
    ],
    imageBreak: {
      src: "https://images.unsplash.com/photo-1489749798305-4fea3ae63d43?w=1920&h=800&fit=crop",
      alt: "Morocco Atlantic coast at golden hour",
      caption: "Sidi Ifni, Morocco — Where Rapture Began",
    },
    comparison: {
      heading: "Stay at Our Surf Camp in Morocco",
      subtitle: "Sidi Ifni is where it all began. More than 20 years ago, our founders started the very first Rapture camp right here.",
      features: ["Vibe", "Best For", "Surf Breaks Nearby", "Pool", "Rooms", "Group Size", "Meals", "Unique Feature"],
      camps: [
        { slug: "/surfcamp/morocco/banana-village", values: ["Intimate & cultural", "All levels", "Sidi Ifni Main, Legzira, The Camel", "No — rooftop terrace instead", "3 room types", "Max 21 guests", "3 meals a day included", "Rooftop ocean views, Berber village trips, 20+ years history"] },
      ],
    },
    faqs: [
      { question: "Is Morocco safe for surf travellers?", answer: "Yes. Morocco has a well-established surf tourism scene, particularly in the Agadir and Sidi Ifni regions. Our camp has operated here for over 20 years. The local community is welcoming and hospitality is deeply ingrained in Moroccan culture." },
      { question: "What is the best time to surf in Morocco?", answer: "October through April is prime season — powerful north Atlantic swells deliver consistent overhead waves to Morocco's point breaks. Summer (May–September) brings smaller waves ideal for beginners, plus warmer water." },
      { question: "Do I need a wetsuit in Morocco?", answer: "In winter (October–March), a 3/2mm wetsuit is recommended as water drops to 17–19°C. In summer you can often surf in boardshorts or a spring suit. We provide wetsuits at the camp." },
      { question: "What makes Morocco different from other surf destinations?", answer: "Morocco offers a unique combination of world-class right-hand point breaks, North African culture, incredible food, and excellent value. Our camp in Banana Village is intimate (max 21 guests), and the cultural immersion — Berber villages, mint tea rituals, medina exploring — is unmatched." },
      { question: "How do I get to your Morocco surf camp?", answer: "Fly into Agadir (AGA) airport. The camp is approximately 2.5 hours south in Sidi Ifni. We arrange airport transfers on check-in days, or you can arrange a taxi." },
    ],
    surfSpots: {
      heading: "Surf Spots Near Sidi Ifni, Morocco",
      subtitle: "Morocco's southern coast is a right-hand point break paradise. Here are the breaks we surf.",
      spots: [
        { name: "Sidi Ifni Main", level: "All levels", type: "Beach break", description: "The town beach offers a wide, sandy-bottom break with peaks along its length. Protected from big swells, it's a reliable spot for beginners and a fun option when the points are too big." },
        { name: "Legzira", level: "Intermediate–Advanced", type: "Point break, right", description: "A long, walling right-hander in front of Morocco's famous red rock arches. Best on mid-tide with a solid NW swell. Beautiful setting with dramatic cliff backdrop." },
        { name: "The Camel", level: "Advanced", type: "Point break, right", description: "A powerful, hollow right that peels along a rocky point south of Sidi Ifni. Named for the camel that hangs out on the beach. Handles big swells and delivers long rides." },
        { name: "Banana Village", level: "Beginner–Intermediate", type: "Beach break", description: "Named after our camp, this is a mellow beach break right on the doorstep. Small, consistent waves on a sandy bottom — ideal for morning warm-ups and afternoon practice sessions." },
        { name: "Devil's Rock", level: "Advanced", type: "Reef break, right", description: "A heavy, shallow reef break that only works on bigger swells. Short, intense barrels for experienced surfers. Our guides know the lineup intimately — not one to paddle out without local knowledge." },
      ],
    },
  },
  nicaragua: {
    title: "Surf Camps\nin Nicaragua",
    tagline: "Central America's hidden gem for surfers",
    description: "Nicaragua's Pacific coast delivers powerful beach breaks, 330 days of offshore winds, and a laid-back atmosphere that's hard to beat. The Land of Lakes and Volcanoes is calling.",
    heroImage: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1920&h=1080&fit=crop",
    heroImages: [
      "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1920&h=1080&fit=crop",
      "https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=1920&h=1080&fit=crop",
      "https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=1920&h=1080&fit=crop",
      "https://images.unsplash.com/photo-1468413253725-0d5181091126?w=1920&h=1080&fit=crop",
    ],
    intro: "Playa Maderas is pure magic — a jungle-fringed bay with consistent surf, warm water, and a vibe that makes you never want to leave. We run two properties here: our hilltop surf camp with infinity pool and glamping tents, and the boutique Maderas Surf Resort.",
    campsSectionTitle: "Stay at Our Surf Camps in Nicaragua",
    imageGrid: [
      { src: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1200&h=500&fit=crop", alt: "Nicaragua tropical coast" },
      { src: "https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=600&h=450&fit=crop", alt: "Surf camp pool Nicaragua" },
      { src: "https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=600&h=225&fit=crop", alt: "Jungle setting at Maderas" },
      { src: "https://images.unsplash.com/photo-1468413253725-0d5181091126?w=600&h=225&fit=crop", alt: "Nicaragua wildlife" },
    ],
    contentBlocks: [
      {
        heading: "When Is the Best Time to Surf in Nicaragua?",
        body: "<p>Nicaragua is blessed with 330 days of offshore winds per year — one of the most consistent surf destinations on the planet. The dry season (November–April) brings clean conditions and overhead swells to Playa Maderas, while the rainy season (May–October) offers bigger waves with fewer crowds.</p><p>Water temperature sits at a balmy 27–29°C year-round. Boardshorts and a rash vest are all you need.</p>",
        image: "https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=800&h=600&fit=crop",
        imageAlt: "Surfing in Nicaragua",
      },
      {
        heading: "A Surf Sanctuary in the Jungle",
        body: "<p>Our main camp sits on a hilltop overlooking the jungle and ocean, with an infinity pool that's become one of the most photographed spots in Nicaraguan surf culture. Choose between private rooms and unique glamping tents — either way, you'll wake up to birdsong and ocean views.</p><p>Surf guiding is included six days a week for intermediate and advanced surfers. For a more boutique experience, the Maderas Surf Resort offers premium accommodation with a laid-back vibe and easy access to San Juan del Sur's nightlife, just 30 minutes away.</p>",
        image: "https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=800&h=600&fit=crop",
        imageAlt: "Infinity pool at Nicaragua surf camp",
        reverse: true,
        background: "dark-lighter",
      },
    ],
    imageBreak: {
      src: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=1920&h=800&fit=crop",
      alt: "Playa Maderas beach Nicaragua at sunset",
      caption: "Playa Maderas, San Juan del Sur",
    },
    comparison: {
      heading: "Which Nicaragua Camp Is Right for You?",
      subtitle: "Two properties at Playa Maderas, each with a distinct personality.",
      features: ["Vibe", "Best For", "Pool", "Accommodation", "Group Size", "Meals", "Standout Feature"],
      camps: [
        { slug: "/surfcamp/nicaragua/maderas", values: ["Backpacker chic & social", "All levels", "Yes — infinity pool with jungle views", "Private rooms & glamping tents", "Up to 30 guests", "Breakfast & dinner included", "Hilltop infinity pool, outdoor cinema"] },
        { slug: "/surfcamp/nicaragua/surf-resort", values: ["Boutique & relaxed", "Intermediate+", "Yes — plunge pool", "Premium private rooms", "Up to 12 guests", "Breakfast included", "Small & intimate, beachfront access"] },
      ],
    },
    faqs: [
      { question: "Is Nicaragua good for beginner surfers?", answer: "Yes. Playa Maderas has a sandy bottom and delivers consistent, forgiving waves ideal for learning. Our beginner programs include small-group lessons, video analysis, and daily theory sessions. The warm water (27–29°C) and mellow beach break make it very approachable." },
      { question: "What is the best time to surf in Nicaragua?", answer: "Nicaragua gets waves year-round thanks to 330 days of offshore winds. The dry season (November–April) offers cleaner conditions and overhead swells. The rainy season (May–October) brings bigger waves with fewer crowds. Brief afternoon rain showers keep things green." },
      { question: "How safe is Nicaragua for tourists?", answer: "The San Juan del Sur and Maderas Beach area is well-established for tourism and very safe. Our camp has security and the local surf community is friendly. As with any travel, use common sense — avoid walking alone at night in remote areas." },
      { question: "What's the difference between the hilltop camp and the resort?", answer: "The hilltop camp is larger, more social, and great for solo travellers or groups — think infinity pool parties, outdoor cinema, and shared dinners. The Maderas Surf Resort is smaller (max 12 guests), more intimate, and ideal for couples or those wanting a quieter experience." },
      { question: "How do I get from Managua airport to the camp?", answer: "The camp is about 2.5 hours from Managua (MGA) airport. We offer shuttle transfers on check-in days, or you can arrange a private taxi. Some guests fly into Costa Rica (Liberia airport) and cross the border overland — we can help coordinate." },
      { question: "Can I combine surf with volcano hiking?", answer: "Definitely. Nicaragua is the Land of Lakes and Volcanoes — we organise day trips to Masaya Volcano, Ometepe Island, and the colonial city of Granada. It's one of the things that makes Nicaragua special compared to other surf destinations." },
    ],
    surfSpots: {
      heading: "Surf Spots Near Playa Maderas, Nicaragua",
      subtitle: "Nicaragua's Pacific coast delivers some of Central America's most consistent surf. Here are our go-to breaks.",
      spots: [
        { name: "Playa Maderas", level: "All levels", type: "Beach break", description: "Our home break — a jungle-fringed bay with a sandy bottom and multiple peaks. Beginners learn on the inside, while advanced surfers find punchy barrels on the outer banks. Consistent year-round with 330 days of offshore wind." },
        { name: "Playa Remanso", level: "Beginner–Intermediate", type: "Beach break", description: "A sheltered bay just south of Maderas with smaller, mellow waves. Perfect for first-timers and longboarders. The beach is quieter and the water calmer — ideal for building confidence." },
        { name: "Playa Yankee", level: "Intermediate–Advanced", type: "Beach break", description: "A powerful beach break north of Maderas that picks up more swell. Fast, hollow peaks deliver barrel opportunities on bigger days. Usually uncrowded." },
        { name: "Playa El Coco", level: "Intermediate", type: "Beach/cobblestone break", description: "A consistent left and right peak over a cobblestone bottom. Works on all tides and handles a wide range of swell sizes. 20 minutes from camp." },
        { name: "Punta Teonoste", level: "Advanced", type: "Point break, left", description: "A long, walling left-hander that wraps around a rocky point. Best on solid south swells with a rising tide. One of Nicaragua's hidden gems — our surf guides know the access." },
      ],
    },
  },
};

export async function getStaticPaths() {
  const sanityCountries = await getCountries();
  return sanityCountries.map((c: any) => ({ params: { country: c.slug } }));
}

const { country } = Astro.params;
const fallback = countryContent[country!];
if (!fallback) return Astro.redirect("/404");

const sanityCountry = await getCountryBySlug(country!);
const countryCamps = await getCampsByCountry(country!);

const countryName = sanityCountry?.name || countries.find((c) => c.slug === country)?.name || country!;

// Sanity pageBuilder blocks (rendered in order via BlockRenderer when available)
const sanityPageBuilder = sanityCountry?.pageBuilder || [];
const hasSanityBlocks = sanityPageBuilder.length > 0;
const h1BlockIndex = sanityPageBuilder.findIndex((b: any) => b._type === "contentBlock");

// Extract FAQs for schema.org structured data (from Sanity or fallback)
const sanityFaqBlock = sanityPageBuilder.find((b: any) => b._type === "faqSection");
const faqsForSchema = sanityFaqBlock?.faqs?.length
  ? sanityFaqBlock.faqs.map((f: any) => ({ question: f.question, answer: f.answer }))
  : fallback.faqs || [];

// Merge Sanity data with hardcoded fallback (for hero, comparison, and fallback sections)
const data = {
  ...fallback,
  title: sanityCountry?.heroTitle || fallback.title,
  tagline: sanityCountry?.heroTagline || fallback.tagline,
  description: sanityCountry?.description || fallback.description,
  intro: sanityCountry?.intro || fallback.intro,
  comparison: {
    ...fallback.comparison,
    heading: sanityCountry?.comparison?.heading || fallback.comparison.heading,
    subtitle: sanityCountry?.comparison?.subtitle || fallback.comparison.subtitle,
    features: sanityCountry?.comparison?.features?.length
      ? sanityCountry.comparison.features
      : fallback.comparison.features,
  },
};

const amenityLabels: Record<string, string> = {
  "pool": "Pool",
  "surf-lessons": "Surf Lessons",
  "yoga": "Yoga",
  "restaurant": "Meals Included",
  "wifi": "WiFi",
  "bar": "Bar",
  "gym": "Gym",
  "bikes": "Bikes",
};
---

<BaseLayout
  title={`${data.title.replace("\n", " ")} | Rapture Surfcamps`}
  description={data.description}
  ogImage={data.heroImage}
  preloadImage={data.heroImages?.[0] || data.heroImage}
>
  {faqsForSchema.length > 0 && (
    <script type="application/ld+json" slot="head" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": faqsForSchema.map(faq => ({
        "@type": "Question",
        "name": faq.question,
        "acceptedAnswer": {
          "@type": "Answer",
          "text": faq.answer,
        },
      })),
    })} />
  )}
  <Hero
    title={data.title}
    tagline={data.tagline}
    backgroundImage={data.heroImage}
    backgroundImages={data.heroImages}
  >
    <Breadcrumbs inline crumbs={[
      { label: "Surf Camps", href: "/surfcamp" },
      { label: countryName },
    ]} />
  </Hero>

  <!-- Intro + Camps -->
  <section class="py-16 sm:py-20 bg-dark">
    <div class="px-6 sm:px-12 lg:px-20">
      <div class="mb-14">
        <h2 class="text-2xl sm:text-3xl lg:text-4xl font-semibold text-white mb-4">{data.comparison.heading}</h2>
        <p class="text-base sm:text-lg text-white/50 max-w-3xl leading-relaxed">{data.comparison.subtitle}</p>
      </div>

      {/* Desktop layout */}
      <div class={`hidden md:block ${data.comparison.camps.length === 1 ? "max-w-2xl mx-auto" : ""}`}>
        <div class="grid gap-6 mb-6" style={`grid-template-columns: repeat(${data.comparison.camps.length}, 1fr)`}>
          {data.comparison.camps.map((compCamp) => {
            const camp = countryCamps.find((d) => compCamp.slug.endsWith(d.slug.split("/").pop()!));
            if (!camp) return null;
            return (
              <a href={camp.slug} class="group overflow-hidden rounded-2xl bg-dark-lighter border border-white/5 transition-all hover:border-white/15">
                <div class="relative aspect-[16/10] overflow-hidden">
                  <img src={camp.image} alt={`${camp.name} surf camp`} class="absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-105" loading="lazy" />
                  {camp.rating && (
                    <div class="absolute top-4 left-4 flex items-center gap-1.5 bg-black/50 backdrop-blur-sm rounded-full px-3 py-1.5">
                      <svg class="h-3.5 w-3.5 text-amber-400" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>
                      <span class="text-white text-xs font-semibold">{camp.rating}</span>
                      {camp.reviewCount && <span class="text-white/50 text-[11px]">({camp.reviewCount})</span>}
                    </div>
                  )}
                </div>
                <div class="p-5">
                  <p class="text-[11px] uppercase tracking-wider text-white/30 mb-1">{camp.location}</p>
                  <h3 class="text-lg font-semibold text-white group-hover:text-ocean-light transition-colors">{camp.name}</h3>
                  {camp.tagline && <p class="text-sm text-white/45 mt-1 leading-snug">{camp.tagline}</p>}
                  {camp.amenities && camp.amenities.length > 0 && (
                    <div class="mt-3 flex flex-wrap gap-1.5">
                      {camp.amenities.map((amenity) => (
                        <span class="inline-flex items-center gap-1 text-[10px] text-white/40 bg-white/5 rounded-full px-2 py-0.5">
                          {amenityLabels[amenity] || amenity}
                        </span>
                      ))}
                    </div>
                  )}
                </div>
              </a>
            );
          })}
        </div>

        <div class="grid gap-6" style={`grid-template-columns: repeat(${data.comparison.camps.length}, 1fr)`}>
          {data.comparison.camps.map((camp, campIdx) => (
            <div class="rounded-2xl border border-white/5 overflow-hidden">
              {data.comparison.features.map((feature, i) => (
                <div class={`p-4 px-5 ${i % 2 === 0 ? "bg-dark-lighter/50" : "bg-dark"} ${i < data.comparison.features.length - 1 ? "border-b border-white/5" : ""}`}>
                  <span class="block text-[11px] uppercase tracking-wider text-white/30 mb-1">{feature}</span>
                  <span class="text-sm text-white/75">{camp.values[i]}</span>
                </div>
              ))}
            </div>
          ))}
        </div>
      </div>

      {/* Mobile layout */}
      <div class="md:hidden space-y-6">
        {data.comparison.camps.map((compCamp) => {
          const camp = countryCamps.find((d) => compCamp.slug.endsWith(d.slug.split("/").pop()!));
          if (!camp) return null;
          return (
            <a href={camp.slug} class="block overflow-hidden rounded-2xl bg-dark-lighter border border-white/5 transition-all hover:border-white/15 group">
              <div class="relative aspect-[16/10] overflow-hidden">
                <img src={camp.image} alt={`${camp.name} surf camp`} class="absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-105" loading="lazy" />
                {camp.rating && (
                  <div class="absolute top-4 left-4 flex items-center gap-1.5 bg-black/50 backdrop-blur-sm rounded-full px-3 py-1.5">
                    <svg class="h-3.5 w-3.5 text-amber-400" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>
                    <span class="text-white text-xs font-semibold">{camp.rating}</span>
                    {camp.reviewCount && <span class="text-white/50 text-[11px]">({camp.reviewCount})</span>}
                  </div>
                )}
              </div>
              <div class="p-5">
                <p class="text-[11px] uppercase tracking-wider text-white/30 mb-1">{camp.location}</p>
                <h3 class="text-lg font-semibold text-white group-hover:text-ocean-light transition-colors">{camp.name}</h3>
                {camp.tagline && <p class="text-sm text-white/45 mt-1 leading-snug">{camp.tagline}</p>}
                {camp.amenities && camp.amenities.length > 0 && (
                  <div class="mt-3 flex flex-wrap gap-1.5">
                    {camp.amenities.map((amenity) => (
                      <span class="inline-flex items-center gap-1 text-[10px] text-white/40 bg-white/5 rounded-full px-2 py-0.5">
                        {amenityLabels[amenity] || amenity}
                      </span>
                    ))}
                  </div>
                )}
                <div class="mt-4 pt-4 border-t border-white/5 space-y-2.5">
                  {data.comparison.features.map((feature, i) => (
                    <div class="flex justify-between items-start gap-4">
                      <span class="text-xs text-white/30 shrink-0">{feature}</span>
                      <span class="text-xs text-white/65 text-right">{compCamp.values[i]}</span>
                    </div>
                  ))}
                </div>
                <div class="mt-4 flex items-center gap-2 text-ocean-light text-xs font-medium">
                  <span>View this camp</span>
                  <svg class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14" /><path d="m12 5 7 7-7 7" /></svg>
                </div>
              </div>
            </a>
          );
        })}
      </div>
    </div>
  </section>

  {hasSanityBlocks ? (
    <!-- Sanity-driven: all blocks render in the order set in the Studio -->
    <BlockRenderer blocks={sanityPageBuilder} h1BlockIndex={h1BlockIndex >= 0 ? h1BlockIndex : undefined} />
  ) : (
    <!-- Fallback: hardcoded content for countries without Sanity data -->
    <Fragment>
      <ImageGrid images={data.imageGrid} variant="collage" />
      {data.contentBlocks.map((block) => (
        <ContentBlock
          heading={block.heading}
          body={block.body}
          image={block.image}
          imageAlt={block.imageAlt}
          reverse={block.reverse}
          background={block.background}
        />
      ))}

      {data.surfSpots && (
        <section class="py-16 sm:py-24 bg-dark" id="surf-spots">
          <div class="px-6 sm:px-12 lg:px-20">
            <div class="max-w-4xl mb-12">
              <h2 class="text-2xl sm:text-3xl lg:text-4xl font-semibold text-white mb-4">{data.surfSpots.heading}</h2>
              <p class="text-base text-white/45 max-w-3xl leading-relaxed">{data.surfSpots.subtitle}</p>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
              {data.surfSpots.spots.map((spot) => {
                const levelColor = spot.level === "Advanced"
                  ? "text-red-400 bg-red-400/10 border-red-400/20"
                  : spot.level === "Beginner" || spot.level === "All levels"
                    ? "text-green-400 bg-green-400/10 border-green-400/20"
                    : "text-amber-400 bg-amber-400/10 border-amber-400/20";
                return (
                  <div class="rounded-xl border border-white/5 bg-dark-lighter p-5 hover:border-white/10 transition-colors">
                    <div class="flex items-start justify-between gap-3 mb-3">
                      <h3 class="text-base font-semibold text-white">{spot.name}</h3>
                      <span class={`shrink-0 text-[10px] font-semibold uppercase tracking-wider rounded-full border px-2 py-0.5 ${levelColor}`}>{spot.level}</span>
                    </div>
                    <p class="text-[11px] uppercase tracking-wider text-white/25 mb-3">{spot.type}</p>
                    <p class="text-sm text-white/50 leading-relaxed">{spot.description}</p>
                  </div>
                );
              })}
            </div>
          </div>
        </section>
      )}

      <ImageBreak
        src={data.imageBreak.src}
        alt={data.imageBreak.alt}
        caption={data.imageBreak.caption}
      />

      {countryCamps[0]?.elfsightId && (
        <ElfsightReviews
          heading={`What Guests Say About ${countryName}`}
          appId={countryCamps[0].elfsightId}
          schema={{
            businessName: `Rapture Surfcamps ${countryName}`,
            ratingValue: countryCamps[0].rating || 4.7,
            reviewCount: countryCamps.reduce((sum, c) => sum + (c.reviewCount || 0), 0),
            url: `https://www.rapturecamps.com/surfcamp/${country}`,
          }}
        />
      )}
    </Fragment>
  )}

  {/* Fallback FAQ for countries without Sanity data */}
  {!hasSanityBlocks && data.faqs && data.faqs.length > 0 && (
    <section class="py-16 sm:py-24 bg-dark-lighter" id="faq">
      <div class="px-6 sm:px-12 lg:px-20">
        <div class="max-w-3xl mx-auto">
          <h2 class="text-2xl sm:text-3xl font-semibold text-white mb-3">Frequently Asked Questions</h2>
          <p class="text-base text-white/40 mb-12">Everything you need to know about surfing in {data.title.replace("Surf Camps\nin ", "").replace("Surf Camp\nin ", "")}.</p>
          <div class="space-y-0 divide-y divide-white/5">
            {data.faqs.map((faq, i) => (
              <details class="group py-5 first:pt-0 last:pb-0" data-faq-index={i}>
                <summary class="flex items-center justify-between cursor-pointer list-none select-none">
                  <h3 class="text-sm sm:text-base font-medium text-white pr-8 group-open:text-ocean-light transition-colors">{faq.question}</h3>
                  <span class="shrink-0 text-white/30 group-open:text-ocean-light transition-transform duration-300 group-open:rotate-45">
                    <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14" /><path d="M5 12h14" /></svg>
                  </span>
                </summary>
                <div class="pt-3 pr-12">
                  <p class="text-sm text-white/55 leading-relaxed">{faq.answer}</p>
                </div>
              </details>
            ))}
          </div>
        </div>
      </div>
    </section>
  )}

  <!-- CTA -->
  <CTASection faqSlug={country} blogCategory={country} />
</BaseLayout>
