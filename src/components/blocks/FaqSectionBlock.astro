---
interface Props {
  block: {
    heading?: string;
    faqs?: {
      question: string;
      answer: string;
    }[];
  };
}

const { block } = Astro.props;
const heading = block.heading || "Frequently Asked Questions";
const faqs = block.faqs || [];
const uid = "faq-" + Math.random().toString(36).slice(2, 8);
---

{faqs.length > 0 && (
  <section class="py-16 sm:py-20 bg-dark">
    <div class="px-6 sm:px-12 lg:px-20 max-w-4xl">
      <h2 class="text-2xl sm:text-3xl lg:text-4xl font-semibold text-white mb-10">{heading}</h2>
      <div class="space-y-3" data-faq-group={uid}>
        {faqs.map((faq, i) => (
          <details class="group rounded-xl border border-white/5 bg-dark-lighter">
            <summary class="flex cursor-pointer items-center justify-between gap-4 p-5 text-left">
              <span class="text-sm font-semibold text-white group-open:text-ocean-light transition-colors">{faq.question}</span>
              <svg class="h-4 w-4 flex-shrink-0 text-white/30 transition-transform duration-200 group-open:rotate-180" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m6 9 6 6 6-6" />
              </svg>
            </summary>
            <div class="px-5 pb-5 text-sm text-white/50 leading-relaxed">{faq.answer}</div>
          </details>
        ))}
      </div>
    </div>
  </section>
)}
