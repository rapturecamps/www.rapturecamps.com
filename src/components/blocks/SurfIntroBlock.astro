---
interface Props {
  block: any;
  campData?: any;
}

const { block, campData } = Astro.props;
const bg = block.background === "dark-lighter" ? "bg-dark-lighter" : "bg-dark";
const heading = block.heading || "The Waves";
const body = block.body || "The coastline around this camp is stacked with surf breaks for every level. From gentle beach breaks perfect for your first pop-up to fast reef passes that'll get your heart pumping — there's a wave for every day and every surfer.\n\nOur instructors have been surfing these waters for years. They know exactly where to go based on the swell, wind, and tide — so you're always in the right spot at the right time.";
const paragraphs = body.split("\n\n");
const conditionsCard = block.conditionsCard || [
  { label: "Wave Type", value: "Beach, Reef & Point" },
  { label: "Peak Season", value: "May – October" },
  { label: "Surf Spots Within Reach", value: "15+" },
];
---

<section class:list={["py-16 sm:py-20", bg]}>
  <div class="px-6 sm:px-12 lg:px-20">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 lg:gap-16 items-start">
      <div>
        <h1 class="text-2xl sm:text-3xl lg:text-4xl font-semibold text-white mb-6">{heading}</h1>
        <div class="text-base sm:text-lg text-white/50 leading-relaxed space-y-4 max-w-xl">
          {paragraphs.map((p) => (
            <p>{p}</p>
          ))}
        </div>
      </div>
      <div
        class="surf-conditions-card rounded-xl border border-white/5 bg-dark-lighter p-6 sm:p-8"
        data-lat={campData?.latitude}
        data-lng={campData?.longitude}
      >
        <div class="flex items-center justify-between mb-5">
          <h3 class="text-sm font-semibold text-white uppercase tracking-wider">Surf Conditions</h3>
          <span class="surf-live-badge hidden items-center gap-1.5 rounded-full bg-green-500/10 border border-green-500/20 px-2.5 py-1">
            <span class="relative flex h-1.5 w-1.5">
              <span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-green-400 opacity-75"></span>
              <span class="relative inline-flex h-1.5 w-1.5 rounded-full bg-green-500"></span>
            </span>
            <span class="text-[10px] uppercase tracking-wider text-green-400 font-semibold">Live</span>
          </span>
        </div>
        <div class="space-y-4">
          {conditionsCard.map((item: any) => (
            <div class="flex justify-between items-center border-b border-white/5 pb-3">
              <span class="text-sm text-white/40">{item.label}</span>
              <span class="text-sm text-white font-medium">{item.value}</span>
            </div>
          ))}
          <div class="pt-1">
            <p class="text-[10px] uppercase tracking-wider text-white/20 mb-3">Current conditions</p>
          </div>
          <div class="flex justify-between items-center border-b border-white/5 pb-3">
            <span class="text-sm text-white/40">Wave Height</span>
            <span class="text-sm text-white font-medium surf-live-wave-height">—</span>
          </div>
          <div class="flex justify-between items-center border-b border-white/5 pb-3">
            <span class="text-sm text-white/40">Wave Period</span>
            <span class="text-sm text-white font-medium surf-live-wave-period">—</span>
          </div>
          <div class="flex justify-between items-center border-b border-white/5 pb-3">
            <span class="text-sm text-white/40">Swell Height</span>
            <span class="text-sm text-white font-medium surf-live-swell-height">—</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm text-white/40">Swell Direction</span>
            <span class="text-sm text-white font-medium surf-live-swell-dir">—</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
