---
interface Props {
  block: any;
}

const { block } = Astro.props;
const bg = block.background === "dark-lighter" ? "bg-dark-lighter" : "bg-dark";
const heading = block.heading || "A Typical Surf Day";
const subtext = block.subtext || "Every day is different depending on conditions, but here's what a standard day looks like.";
const schedule = block.schedule || [
  { time: "06:30", activity: "Wake-up & light stretch" },
  { time: "07:00", activity: "Breakfast buffet" },
  { time: "08:00", activity: "Surf theory & video analysis" },
  { time: "08:30", activity: "Morning surf session (2â€“3 hrs)" },
  { time: "12:00", activity: "Lunch & free time" },
  { time: "14:00", activity: "Yoga or recovery session" },
  { time: "15:00", activity: "Afternoon surf session (2 hrs)" },
  { time: "17:30", activity: "Sunset beers & video review" },
  { time: "19:00", activity: "Dinner" },
];

const scheduleIcons: Record<string, string> = {
  "Wake-up": "M12 3a6 6 0 0 0 9 9 9 9 0 0 1-9-9Z M6.34 17.66 4 22 M17.66 17.66 20 22",
  "Breakfast": "M17 8h1a4 4 0 1 1 0 8h-1M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",
  "Surf theory": "M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",
  "Morning surf": "M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",
  "Lunch": "M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2M7 2v20M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",
  "Yoga": "M18 8a6 6 0 0 1-6 6 6 6 0 0 1-6-6",
  "Afternoon surf": "M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2s2.4 2 5 2c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",
  "Sunset": "M23 7l-7 5 7 5V7z M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z",
  "Dinner": "M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",
};

function getScheduleIcon(activity: string): string {
  for (const [key, icon] of Object.entries(scheduleIcons)) {
    if (activity.toLowerCase().includes(key.toLowerCase())) return icon;
  }
  return "M12 8v4l3 3m6-3a9 9 0 1 1-18 0 9 9 0 0 1 18 0z";
}

const scheduleWithIcons = schedule.map((s: any) => ({ ...s, icon: getScheduleIcon(s.activity) }));
---

<section class:list={["py-16 sm:py-20", bg]}>
  <div class="px-6 sm:px-12 lg:px-20">
    <h2 class="text-2xl sm:text-3xl lg:text-4xl font-semibold text-white mb-3">{heading}</h2>
    <p class="text-base text-white/40 mb-10 max-w-2xl">{subtext}</p>
    <div class="max-w-2xl">
      <div class="relative">
        <div class="absolute left-[19px] top-3 bottom-3 w-px bg-white/10" />
        <div class="space-y-0">
          {scheduleWithIcons.map((s: any) => (
            <div class="relative flex items-start gap-5 py-3">
              <div class="relative z-10 flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-dark border border-white/10">
                <svg class="h-4 w-4 text-white/40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                  <path d={s.icon} />
                </svg>
              </div>
              <div class="pt-2">
                <span class="text-xs text-ocean-light font-medium tracking-wide">{s.time}</span>
                <p class="text-sm text-white/60 mt-0.5">{s.activity}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>
</section>
