---
export interface Crumb {
  label: string;
  href?: string;
}

interface Props {
  crumbs: Crumb[];
  inline?: boolean;
}

const { crumbs, inline = false } = Astro.props;

const allCrumbs: Crumb[] = [{ label: "Home", href: "/" }, ...crumbs];

const jsonLd = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  itemListElement: allCrumbs.map((crumb, i) => ({
    "@type": "ListItem",
    position: i + 1,
    name: crumb.label,
    ...(crumb.href ? { item: `https://www.rapturecamps.com${crumb.href}` } : {}),
  })),
};
---

<script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />

{inline ? (
  <nav aria-label="Breadcrumb">
    <ol class="flex items-center gap-1.5 text-[12px] sm:text-[13px] flex-wrap mt-4 sm:mt-5">
      {allCrumbs.map((crumb, i) => (
        <li class="flex items-center gap-1.5">
          {i > 0 && (
            <svg class="h-3 w-3 text-white/20 shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6" /></svg>
          )}
          {crumb.href && i < allCrumbs.length - 1 ? (
            <a href={crumb.href} class="text-white/40 hover:text-white/70 transition-colors">{crumb.label}</a>
          ) : (
            <span class="text-white/60">{crumb.label}</span>
          )}
        </li>
      ))}
    </ol>
  </nav>
) : (
  <nav aria-label="Breadcrumb" class="bg-dark">
    <div class="px-6 sm:px-12 lg:px-20 py-4">
      <ol class="flex items-center gap-1.5 text-[12px] sm:text-[13px] flex-wrap">
        {allCrumbs.map((crumb, i) => (
          <li class="flex items-center gap-1.5">
            {i > 0 && (
              <svg class="h-3 w-3 text-white/15 shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6" /></svg>
            )}
            {crumb.href && i < allCrumbs.length - 1 ? (
              <a href={crumb.href} class="text-white/35 hover:text-white/60 transition-colors">{crumb.label}</a>
            ) : (
              <span class="text-white/55">{crumb.label}</span>
            )}
          </li>
        ))}
      </ol>
    </div>
  </nav>
)}
